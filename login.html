<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>تسجيل الدخول - Bayan Salary</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .login-container {
      max-width: 400px;
      width: 90%;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    .p-6 { padding: 1.5rem; }
    .pt-0 { padding-top: 0; }
    .space-y-6 > * + * { margin-top: 1.5rem; }
    .space-y-4 > * + * { margin-top: 1rem; }
    .space-y-2 > * + * { margin-top: 0.5rem; }
    .text-sm { font-size: 0.875rem; }
    .font-medium { font-weight: 500; }
    .text-anb-blue { color: #003366; }
    .dark:text-white { color: white; }
    .cursor-pointer { cursor: pointer; }
    .relative { position: relative; }
    .absolute { position: absolute; }
    .right-3 { right: 0.75rem; }
    .top-1/2 { top: 50%; }
    .transform { transform: translateY(-50%); }
    .text-anb-gray { color: #666; }
    .h-4, .w-4 { height: 1rem; width: 1rem; }
    input {
      width: 100%;
      padding: 0.75rem 2.5rem 0.75rem 0.75rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
      outline: none;
    }
    .pr-10 { padding-right: 2.5rem; }
    .border-anb-border { border-color: #ddd; }
    .focus\:border-anb-blue:focus { border-color: #003366; }
    button {
      border: none;
      background: none;
      cursor: pointer;
    }
    .inline-flex {
      display: inline-flex;
      align-items: center;
    }
    .ml-2 { margin-left: 0.5rem; }
    .w-full { width: 100%; }
    .bg-gradient-to-r {
      background: linear-gradient(to right, #003366, #00254d);
      color: white;
      padding: 0.75rem;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s;
    }
    .bg-gradient-to-r:hover {
      transform: scale(1.02);
    }
    .shrink-0 { flex-shrink: 0; }
    .h-[1px] { height: 1px; }
    .bg-border { background: #eee; }
    .my-6 { margin: 1.5rem 0; }
    .text-anb-accent { color: #4fc3f7; }
    .hover\:bg-anb-light\\/50:hover { background: #e3f2fd; }
    .border { border: 1px solid #ccc; }
    .dark\:border-anb-dark-border { border-color: #444; }
    .pt-4 { padding-top: 1rem; }
    .text-center { text-align: center; }
    .mb-3 { margin-bottom: 0.75rem; }
    .w-16, .h-16 { width: 4rem; height: 4rem; }
    .rounded-full { border-radius: 50%; }
    .hover\:bg-anb-light\\/30:hover { background: #bbdefb; }
    .text-anb-blue.dark\:text-anb-accent { color: #4fc3f7; }
  </style>
</head>
<body>
  <div class="login-container">
    <div class="p-6 pt-0 space-y-6">
      <form id="loginForm" class="space-y-4">
        <div class="space-y-2">
          <label class="text-sm font-medium text-anb-blue dark:text-white cursor-pointer" for="username">اسم المستخدم</label>
          <div class="relative">
            <svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-user absolute right-3 top-1/2 transform text-anb-gray h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <input type="text" id="username" placeholder="اسم المستخدم" class="pr-10 border-anb-border focus:border-anb-blue" required />
          </div>
        </div>

        <div class="space-y-2">
          <label class="text-sm font-medium text-anb-blue dark:text-white cursor-pointer" for="password">كلمة المرور</label>
          <div class="relative">
            <svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-lock absolute right-3 top-1/2 transform text-anb-gray h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="18" height="11" x="3" y="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <input type="password" id="password" placeholder="كلمة المرور" class="pr-10 pl-10 border-anb-border focus:border-anb-blue" required />
            <button type="button" onclick="togglePassword()" class="absolute left-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0">
              <svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-eye h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
        </div>

        <button type="submit" class="bg-gradient-to-r from-anb-blue to-anb-blue-dark text-white font-medium py-3 rounded-lg shadow-lg w-full">
          <svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-shield ml-2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"></path>
          </svg> دخول
        </button>
      </form>

      <div class="shrink-0 bg-border h-[1px] w-full my-6"></div>

      <div class="space-y-3">
        <button onclick="alert('تم إرسال تعليمات إعادة التعيين إلى بريدك.')" class="w-full text-anb-blue dark:text-anb-accent hover:bg-anb-light/50 p-2">
          نسيت كلمة المرور؟
        </button>
        <button onclick="alert('تم إرسال رابط إنشاء الحساب.')" class="w-full border border-anb-border dark:border-anb-dark-border text-anb-blue dark:text-white hover:bg-anb-light/30 p-2 rounded">
          إنشاء حساب جديد
        </button>
      </div>

      <div class="pt-4 text-center">
        <p class="text-sm text-anb-gray mb-3 cursor-pointer">أو استخدم البصمة للدخول</p>
        <button onclick="biometricLogin()" class="w-16 h-16 rounded-full border border-anb-border hover:bg-anb-light/30 mx-auto">
          <svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-fingerprint w-8 h-8 text-anb-blue dark:text-anb-accent mx-auto" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4"></path>
            <path d="M14 13.12c0 2.38 0 6.38-1 8.88"></path>
            <path d="M17.29 21.02c.12-.6.43-2.3.5-3.02"></path>
            <path d="M2 12a10 10 0 0 1 18-6"></path>
            <path d="M2 16h.01"></path>
            <path d="M21.8 16c.2-2 .131-5.354 0-6"></path>
            <path d="M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2"></path>
            <path d="M8.65 22c.21-.66.45-1.32.57-2"></path>
            <path d="M9 6.8a6 6 0 0 1 9 5.2v2"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- نموذج PIN -->
  <div id="pinSection" style="display: none; padding: 2rem; max-width: 400px; margin: 2rem auto; background: white; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
    <h2>أدخل رمز PIN</h2>
    <p>أدخل رمز PIN المؤلف من 6 أرقام</p>
    <input type="password" id="pin" maxlength="6" placeholder="******" style="width:100%; padding:0.7rem; margin:1rem 0; border:1px solid #ccc; border-radius:5px; text-align:center; font-size:1.2rem;" />
    <button onclick="verifyPIN()" style="width:100%; padding:0.7rem; background:#003366; color:white; border:none; border-radius:5px; cursor:pointer;">تأكيد</button>
  </div>

  <script>
    let generatedPIN = '';

    document.getElementById('loginForm').onsubmit = function(e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if (username && password) {
        generatedPIN = Math.floor(100000 + Math.random() * 900000).toString();
        console.log('رمز PIN (للاختبار):', generatedPIN);
        alert(`تم إنشاء رمز PIN.\nالرمز: ${generatedPIN}`);

        document.querySelector('.login-container').style.display = 'none';
        document.getElementById('pinSection').style.display = 'block';
      } else {
        alert('الرجاء إدخال اسم المستخدم وكلمة المرور');
      }
    };

    function verifyPIN() {
      const pin = document.getElementById('pin').value;
      if (pin === generatedPIN) {
        localStorage.setItem('isLoggedIn', 'true');
        window.location.href = 'index.html';
      } else {
        alert('الرمز غير صحيح');
      }
    }

    function togglePassword() {
      const passwordInput = document.getElementById('password');
      const icon = event.target.querySelector('svg');
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        icon.outerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-eye-off h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path><path d="M10.73 5.07A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a18.54 18.54 0 0 1-2.16 3.19"></path><path d="M6.14 6.14A10.5 10.5 0 0 0 4 12c0 7 3 7 10 7a18.6 18.6 0 0 0 5.52-1.3"></path><line x1="2" x2="22" y1="2" y2="22"></line></svg>`;
      } else {
        passwordInput.type = 'password';
        icon.outerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-eye h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"></path><circle cx="12" cy="12" r="3"></circle></svg>`;
      }
    }

    async function biometricLogin() {
      if (window.PublicKeyCredential && navigator.credentials) {
        try {
          const supported = await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();
          if (supported) {
            const credential = await navigator.credentials.get({
              publicKey: {
                challenge: new Uint8Array(32),
                rpId: window.location.hostname,
                allowCredentials: [],
                userVerification: "required"
              }
            });
            if (credential) {
              localStorage.setItem('isLoggedIn', 'true');
              window.location.href = 'index.html';
            }
          } else {
            alert('المصادقة الحيوية غير مدعومة على جهازك.');
          }
        } catch (err) {
          alert('فشل في التحقق بالبصمة. يرجى استخدام رمز PIN.');
        }
      } else {
        alert('المتصفح لا يدعم المصادقة الحيوية. يرجى استخدام رمز PIN.');
      }
    }

    if (window.location.pathname.endsWith('index.html') && !localStorage.getItem('isLoggedIn')) {
      window.location.href = 'login.html';
    }
  </script>
</body>
</html>